# Tiz Application Environment Configuration
# Copy this file to .env and update with your values
# This file is used by both docker-compose-lite.yml and docker-compose-app.yml

# ==================== Image Configuration ====================
# Docker image tags
IMAGE_TAG=latest

# Image repositories (override if using custom registry)
TIZ_WEB_IMAGE=ghcr.io/suj1e/tiz/tiz-web
GATEWAYSRV_IMAGE=ghcr.io/suj1e/tiz/gatewaysrv
AUTHSRV_IMAGE=ghcr.io/suj1e/tiz/authsrv
CHATSRV_IMAGE=ghcr.io/suj1e/tiz/chatsrv
CONTENTSRV_IMAGE=ghcr.io/suj1e/tiz/contentsrv
PRACTICESRV_IMAGE=ghcr.io/suj1e/tiz/practicesrv
QUIZSRV_IMAGE=ghcr.io/suj1e/tiz/quizsrv
LLMSRV_IMAGE=ghcr.io/suj1e/tiz/llmsrv
USERSRV_IMAGE=ghcr.io/suj1e/tiz/usersrv

# ==================== Port Configuration ====================
# External ports exposed on host
WEB_PORT=80
GATEWAY_PORT=8080

# ==================== Application Configuration ====================
# Spring profile (dev, prod)
SPRING_PROFILES_ACTIVE=prod

# Frontend API base URL
VITE_API_BASE_URL=https://api.tiz.dmall.ink

# ==================== MySQL Configuration ====================
MYSQL_ROOT_PASSWORD=your-mysql-root-password
MYSQL_PASSWORD=your-mysql-tiz-user-password
# Application uses this to connect to MySQL
SPRING_DATASOURCE_PASSWORD=${MYSQL_PASSWORD}
SPRING_DATASOURCE_URL=jdbc:mysql://172.28.0.10:3306/tiz?useSSL=false&serverTimezone=Asia/Shanghai&characterEncoding=utf8
SPRING_DATASOURCE_USERNAME=tiz

# ==================== Redis Configuration ====================
REDIS_PASSWORD=your-redis-password
# Application uses this to connect to Redis
SPRING_DATA_REDIS_PASSWORD=${REDIS_PASSWORD}
SPRING_DATA_REDIS_HOST=172.28.0.11
SPRING_DATA_REDIS_PORT=6379

# ==================== Elasticsearch Configuration ====================
ELASTIC_PASSWORD=your-elastic-password

# ==================== Nacos Configuration ====================
# Nacos server address (from docker-compose-lite.yml)
NACOS_SERVER_ADDR=172.28.0.14:8848
# Nacos namespace (leave empty for public namespace)
NACOS_NAMESPACE=
# Nacos group
NACOS_GROUP=DEFAULT_GROUP
# Nacos auth credentials
NACOS_USERNAME=nacos
NACOS_PASSWORD=your-nacos-password
# Nacos auth token (must be at least 32 characters)
NACOS_AUTH_TOKEN=SecretKey012345678901234567890123456789012345678901234567890123456789

# ==================== Kafka Configuration ====================
# Kafka bootstrap servers (using tiz-network IP from docker-compose-lite.yml)
KAFKA_BOOTSTRAP_SERVERS=172.28.0.15:9094

# ==================== LLM Service Configuration ====================
# LLM database URL (SQLAlchemy format)
LLM_DATABASE_URL=mysql+pymysql://tiz:${MYSQL_PASSWORD}@172.28.0.10:3306/tiz

# OpenAI API Configuration
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o

# LangChain Configuration (optional)
LANGCHAIN_API_KEY=
LANGCHAIN_TRACING_V2=false

# LLM service logging level
LOG_LEVEL=INFO

# ==================== Security Configuration ====================
# JWT secret key (generate a strong random string)
JWT_SECRET=change-this-to-a-strong-random-string-at-least-32-chars
# JWT expiration time in milliseconds (24 hours = 86400000)
JWT_EXPIRATION=86400000

# ==================== JVM Configuration ====================
# Java service memory settings
JAVA_OPTS=-Xms256m -Xmx512m

# Per-service JVM options (override JAVA_OPTS if needed)
GATEWAY_JAVA_OPTS=-Xms256m -Xmx512m
AUTHSRV_JAVA_OPTS=-Xms256m -Xmx512m
CHATSRV_JAVA_OPTS=-Xms256m -Xmx512m
CONTENTSRV_JAVA_OPTS=-Xms256m -Xmx512m
PRACTICESRV_JAVA_OPTS=-Xms256m -Xmx512m
QUIZSRV_JAVA_OPTS=-Xms256m -Xmx512m
USERSRV_JAVA_OPTS=-Xms256m -Xmx512m
